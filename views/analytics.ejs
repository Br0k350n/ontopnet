<!DOCTYPE html>
<html lang="en">
    <%- include('partials/head', {title: "Analytics", tag: "CoT Admin", isAdmin: true}); %>
<body>
    <%- include('partials/header', {session: session}); %>
    
    <div class="w-full layout-container lc-home">
        <div class="index-layout">
          <%- include('partials/admin-cat'); %>
            <div class="body-container">
                <main class="index-content">
                    <section class="content">
                        <!-- Monthly Information Container -->
                        <div class="monthly-info-container">
                            <h2>Monthly Overview</h2>
                            <div class="info-grid">
                                <div class="info-box">
                                    <h3>Listings Created</h3>
                                    <p id="listings-created">0</p>
                                </div>
                                <div class="info-box">
                                    <h3>New User Accounts</h3>
                                    <p id="new-users">0</p>
                                </div>
                                <div class="info-box">
                                    <h3>Membership Revenue</h3>
                                    <p id="membership-revenue">$0</p>
                                </div>
                                <div class="info-box">
                                    <h3>Banner Revenue</h3>
                                    <p id="banner-revenue">$0</p>
                                </div>
                                <div class="info-box">
                                    <h3>Total Impressions</h3>
                                    <p id="total-impressions">0</p>
                                </div>
                                <div class="info-box">
                                    <h3>Unique Visitors</h3>
                                    <p id="unique-visitors">0</p>
                                </div>
                                <div class="info-box">
                                    <h3>Regions</h3>
                                    <p id="regions">0</p>
                                </div>
                                <div class="info-box">
                                    <h3>Redirects from Voting Links</h3>
                                    <p id="voting-redirects">0</p>
                                </div>
                                <div class="info-box">
                                    <h3>Accounts Created from Invites</h3>
                                    <p id="invite-accounts">0</p>
                                </div>
                            </div>
                        </div>


                        <!-- Graphs Container -->
                        <div class="graphs-container">
                            <div class="graphs-2x2-container">
                                <div class="graphs-row">
                                    <div class="graph-box">
                                        <h4>Monthly Revenue</h4>
                                        <canvas id="monthly-revenue-chart"></canvas>
                                    </div>
                                    <div class="graph-box">
                                        <h4>User Growth</h4>
                                        <canvas id="user-growth-chart"></canvas>
                                    </div>
                                </div>
                                <div class="graphs-row">
                                    <div class="graph-box">
                                        <h4>Regional Visitors</h4>
                                        <canvas id="regional-visitors-chart"></canvas>
                                    </div>
                                    <div class="graph-box">
                                        <h4>Voting Link Performance</h4>
                                        <canvas id="voting-performance-chart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </main>
            </div>
            
        </div>
        <div class="ctas space">
              
        </div> 
    </div>
     
    <%- include('partials/footer'); %>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Example for initializing graphs with Chart.js
        const createChart = (ctx, label, data, backgroundColor, borderColor) => {
            return new Chart(ctx, {
                type: 'line',
                data: {
                    labels: label,
                    datasets: [{
                        label: label,
                        data: data,
                        backgroundColor: backgroundColor,
                        borderColor: borderColor,
                        borderWidth: 1,
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false,
                        },
                    },
                }
            });
        };

        // Example data for charts
        const sampleLabels = ['W1', 'W2', 'W3', 'W4'];
        const sampleData = [100, 200, 150, 300];
        const bgColor = 'rgba(75, 192, 192, 0.2)';
        const bColor = 'rgba(75, 192, 192, 1)';

        // Initialize Charts
        createChart(document.getElementById('monthly-revenue-chart').getContext('2d'), sampleLabels, sampleData, bgColor, bColor);
        createChart(document.getElementById('user-growth-chart').getContext('2d'), sampleLabels, sampleData, bgColor, bColor);
        createChart(document.getElementById('regional-visitors-chart').getContext('2d'), sampleLabels, sampleData, bgColor, bColor);
        createChart(document.getElementById('voting-performance-chart').getContext('2d'), sampleLabels, sampleData, bgColor, bColor);

        // Highlight the current page dynamically
        const currentDir = window.location.pathname;
        document.querySelectorAll('.cat-nav a').forEach(link => {
            if (link.getAttribute('href') === currentDir) {
                link.classList.add('active');
            }
        });
    </script>
</body>
</html>
